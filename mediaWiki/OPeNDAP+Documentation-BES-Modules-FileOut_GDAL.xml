<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.11/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.11/ http://www.mediawiki.org/xml/export-0.11.xsd" version="0.11" xml:lang="en">
  <siteinfo>
    <sitename>OPeNDAP Documentation</sitename>
    <dbname>wikidb</dbname>
    <base>https://docs.opendap.org/index.php/Home</base>
    <generator>MediaWiki 1.38.4</generator>
    <case>first-letter</case>
    <namespaces>
      <namespace key="-2" case="first-letter">Media</namespace>
      <namespace key="-1" case="first-letter">Special</namespace>
      <namespace key="0" case="first-letter" />
      <namespace key="1" case="first-letter">Talk</namespace>
      <namespace key="2" case="first-letter">User</namespace>
      <namespace key="3" case="first-letter">User talk</namespace>
      <namespace key="4" case="first-letter">OPeNDAP Documentation</namespace>
      <namespace key="5" case="first-letter">OPeNDAP Documentation talk</namespace>
      <namespace key="6" case="first-letter">File</namespace>
      <namespace key="7" case="first-letter">File talk</namespace>
      <namespace key="8" case="first-letter">MediaWiki</namespace>
      <namespace key="9" case="first-letter">MediaWiki talk</namespace>
      <namespace key="10" case="first-letter">Template</namespace>
      <namespace key="11" case="first-letter">Template talk</namespace>
      <namespace key="12" case="first-letter">Help</namespace>
      <namespace key="13" case="first-letter">Help talk</namespace>
      <namespace key="14" case="first-letter">Category</namespace>
      <namespace key="15" case="first-letter">Category talk</namespace>
    </namespaces>
  </siteinfo>
  <page>
    <title>BES - Modules - FileOut GDAL</title>
    <ns>0</ns>
    <id>964</id>
    <revision>
      <id>11893</id>
      <parentid>11892</parentid>
      <timestamp>2015-05-11T20:46:58Z</timestamp>
      <contributor>
        <username>Jimg</username>
        <id>3</id>
      </contributor>
      <minor/>
      <comment>/* How to use the module */</comment>
      <origin>11893</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="3265" sha1="2jt7eoc24vi85c3v532ywfjvkzrc3i9" xml:space="preserve">==Description==
The File Out GDAL module provides the ability to return various kinds of GIS data files as responses from Hyrax. The handler currently supports returning GeoTIFF and JPEG2000 files. Not every dataset served by Hyrax can be returned as a GIS dataset, either because it lacks latitude/longitude information or because it is not organized so that the latitude and longitude values are recognized by this module.

Most GIS data include information about their coordinate reference systems, but how that information is encoded can vary widely. This handler looks for geographical information that follows the CF-1.4 standard for [grid mappings and projections http://cfconventions.org/Data/cf-conventions/cf-conventions-1.6/build/cf-conventions.html#grid-mappings-and-projections] (note that the link is actually to the CF-1.6 standard; it seems the CF-1.4 site from LLNL is no longer available). It will recognize either the EPSG:4047 or WGS84 Geographical Coordinate systems (GCS) and provides an option to set the default GCS using a parameter (described below).

==Services Handled==
This module does not handle any services but adds to an existing service

==Services Provided==
The module provides an additional format to the &lt;code&gt;dap&lt;/code&gt; service's &lt;code&gt;dods&lt;/code&gt; command. The format is used to specify a "returnAs" format. This module provides the additional format of returning the OPenDAP data object as a GeoTIFF or JPEG2000 file.

==How to use the module==
Once installed, the ''fong.conf'' file is installed in the BES etc/bes/modules directory and is automatically loaded by the BES at startup. There is a configuration option that you can change for this module. The ''FONg.Tempdir' parameter in the ''fong.conf'' configuration file tells the module where to store the files generated by the module until the file is streamed back to the caller. The default value for this parameter is the /tmp directory. You should change this to a location where there is plenty of disk space/quota that is owned by the user set to run the BES.

 FONg.Tempdir=/tmp

The next time the BES is started it will load this module. And, once installed, the OLFS will know that it can use this module to transform your data. You can get GeoTIFF or JPEG2000 responses for applicable datasets by appending the extensions ''.tiff'' or ''.jp2'' to the dataset's OpenDAP URL.

If not using the OLFS to serve your data, for example if using the bescmdln, you would run a command file that would look something like this:

&lt;source lang="xml"&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;request reqID="some_unique_value" &gt;
    &lt;setContext name="dap_format"&gt;dap2&lt;/setContext&gt;
    &lt;setContainer name="c" space="catalog"&gt;data/nc/coads_climatology.nc&lt;/setContainer&gt;
    &lt;define name="d"&gt;
	&lt;container name="c" /&gt;
    &lt;/define&gt;
    &lt;get type="dods" definition="d" returnAs="tiff"/&gt;
&lt;/request&gt;
&lt;/source&gt;

In addition to setting the directory where the response file is initially built, you can use the ''FONg.default_gcs'' configuration parameter to set the default Geographical Coordinate System (GCS) for the handler. This GCS will be used when the dataset's metadata does not provide information GCS that the handler can recognize.

[[Category:BES Modules|FileOut GDAL]]</text>
      <sha1>2jt7eoc24vi85c3v532ywfjvkzrc3i9</sha1>
    </revision>
  </page>
</mediawiki>
