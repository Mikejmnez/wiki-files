<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.11/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.11/ http://www.mediawiki.org/xml/export-0.11.xsd" version="0.11" xml:lang="en">
  <siteinfo>
    <sitename>OPeNDAP Documentation</sitename>
    <dbname>wikidb</dbname>
    <base>https://docs.opendap.org/index.php/Home</base>
    <generator>MediaWiki 1.38.4</generator>
    <case>first-letter</case>
    <namespaces>
      <namespace key="-2" case="first-letter">Media</namespace>
      <namespace key="-1" case="first-letter">Special</namespace>
      <namespace key="0" case="first-letter" />
      <namespace key="1" case="first-letter">Talk</namespace>
      <namespace key="2" case="first-letter">User</namespace>
      <namespace key="3" case="first-letter">User talk</namespace>
      <namespace key="4" case="first-letter">OPeNDAP Documentation</namespace>
      <namespace key="5" case="first-letter">OPeNDAP Documentation talk</namespace>
      <namespace key="6" case="first-letter">File</namespace>
      <namespace key="7" case="first-letter">File talk</namespace>
      <namespace key="8" case="first-letter">MediaWiki</namespace>
      <namespace key="9" case="first-letter">MediaWiki talk</namespace>
      <namespace key="10" case="first-letter">Template</namespace>
      <namespace key="11" case="first-letter">Template talk</namespace>
      <namespace key="12" case="first-letter">Help</namespace>
      <namespace key="13" case="first-letter">Help talk</namespace>
      <namespace key="14" case="first-letter">Category</namespace>
      <namespace key="15" case="first-letter">Category talk</namespace>
    </namespaces>
  </siteinfo>
  <page>
    <title>Dap:Attribute Extension Example 3b</title>
    <ns>0</ns>
    <id>406</id>
    <revision>
      <id>2950</id>
      <parentid>2949</parentid>
      <timestamp>2009-01-21T20:49:13Z</timestamp>
      <contributor>
        <username>Ndp</username>
        <id>2</id>
      </contributor>
      <comment>/* Source XML */</comment>
      <origin>2950</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="8252" sha1="jrfbl66n9klcyhyas5uulxsj1aan1g1" xml:space="preserve">== Example 3b ==

Here we embed an entire wcs:CoverageDescription and wcs:CoverageSummary at the top level of a DDX.



==== Source XML ====
&lt;pre&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Dataset name="200803061600_HFRadar_USEGC_6km_rtv_SIO.nc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://xml.opendap.org/ns/DAP2"
xsi:schemaLocation="http://xml.opendap.org/ns/DAP2  http://xml.opendap.org/dap/dap2.xsd"&gt;



  &lt;Attribute name="wcsStuff" type="xml" &gt;
    &lt;CoverageDescription xmlns="http://www.opengis.net/wcs/1.1" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:owcs="http://www.opengis.net/wcs/1.1/ows" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:schemaLocation="http://www.opengis.net/wcs/1.1  http://schemas.opengis.net/wcs/1.1.0/wcsDescribeCoverage.xsd  http://www.opengis.net/ows/1.1  http://schemas.opengis.net/ows/1.1.0/owsAll.xsd  http://www.opengis.net/wcs/1.1/ows http://schemas.opengis.net/wcs/1.1.0/owsDataIdentification.xsd http://www.opengis.net/gml/3.2  http://schemas.opengis.net/gml/3.2.1/gml.xsd"&gt;
        &lt;ows:Title&gt;Near-Real Time Surface Ocean Velocity&lt;/ows:Title&gt;
        &lt;ows:Abstract&gt;CoverageDescription generated by OPeNDAP WCS UseCase 2.0&lt;/ows:Abstract&gt;
        &lt;Identifier&gt;coverage/200803061600_HFRadar_USEGC_6km_rtv_SIO.nc&lt;/Identifier&gt;
        &lt;Domain&gt;
            &lt;SpatialDomain&gt;
                &lt;ows:BoundingBox crs="urn:ogc:def:crs:EPSG::4326"&gt;
                    &lt;ows:LowerCorner&gt;-97.8839 21.736&lt;/ows:LowerCorner&gt;
                    &lt;ows:UpperCorner&gt;-57.2312 46.4944&lt;/ows:UpperCorner&gt;
                &lt;/ows:BoundingBox&gt;
            &lt;/SpatialDomain&gt;
            &lt;TemporalDomain&gt;
                &lt;gml:timePosition&gt;2008-03-27T16:00:00.000Z&lt;/gml:timePosition&gt;
            &lt;/TemporalDomain&gt;
        &lt;/Domain&gt;
        &lt;Range&gt;
        &lt;/Range&gt;
        &lt;SupportedCRS&gt;urn:ogc:def:crs:EPSG::4326&lt;/SupportedCRS&gt;
        &lt;SupportedFormat&gt;netcdf-cf1.0&lt;/SupportedFormat&gt;
        &lt;SupportedFormat&gt;dap2.0&lt;/SupportedFormat&gt;
    &lt;/CoverageDescription&gt;

    &lt;CoverageSummary xmlns="http://www.opengis.net/wcs/1.1" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:owcs="http://www.opengis.net/wcs/1.1/ows" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:schemaLocation="http://www.opengis.net/wcs/1.1  http://schemas.opengis.net/wcs/1.1.0/wcsDescribeCoverage.xsd  http://www.opengis.net/ows/1.1  http://schemas.opengis.net/ows/1.1.0/owsAll.xsd  http://www.opengis.net/wcs/1.1/ows http://schemas.opengis.net/wcs/1.1.0/owsDataIdentification.xsd http://www.opengis.net/gml/3.2  http://schemas.opengis.net/gml/3.2.1/gml.xsd"&gt;
       &lt;ows:Title&gt;6km HF Radar data&lt;/ows:Title&gt;
       &lt;ows:Abstract&gt;A test dataset for use developing WCS services.&lt;/ows:Abstract&gt;
       &lt;ows:Metadata xlink:href="http://ndp.opendap:8080/opendap/coverage/200803061600_HFRadar_USEGC_6km_rtv_SIO.nc.das"/&gt;
       &lt;ows:WGS84BoundingBox&gt;
          &lt;ows:LowerCorner&gt;-97.8839 21.736&lt;/ows:LowerCorner&gt;
          &lt;ows:UpperCorner&gt;-57.2312 46.4944&lt;/ows:UpperCorner&gt;
       &lt;/ows:WGS84BoundingBox&gt;
       &lt;Identifier&gt;coverage/200803061600_HFRadar_USEGC_6km_rtv_SIO.nc&lt;/Identifier&gt;
    &lt;/CoverageSummary&gt;
  &lt;/Attribute&gt;

    &lt;Attribute name="NC_GLOBAL" type="Container"&gt;
        &lt;Attribute name="title" type="String"&gt;
            &lt;value&gt;Near-Real Time Surface Ocean Velocity&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="institution" type="String"&gt;
            &lt;value&gt;Scripps Institution of Oceanography&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="source" type="String"&gt;
            &lt;value&gt;Surface Ocean HF-Radar&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="history" type="String"&gt;
            &lt;value&gt;12-Mar-2008 22:26:19:  NetCDF file created&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="references" type="String"&gt;
            &lt;value&gt;Terrill, E. et al., 2006. Data Management and Real-time\\012Distribution in the HF-Radar National Network. Proceedings\\012of the MTS/IEEE Oceans 2006 Conference, Boston MA,\\012September 2006.&lt;/value&gt;
        &lt;/Attribute&gt;
    &lt;/Attribute&gt;

    &lt;Grid name="u"&gt;
      &lt;Attribute name="wcsStuff" type="xml" &gt;
        &lt;Field&gt;
            &lt;ows:Title&gt;surface_eastward_sea_water_velocity&lt;/ows:Title&gt;
            &lt;ows:Abstract&gt;Eastward component of a 2D sea surface velocity vector.&lt;/ows:Abstract&gt;
            &lt;Identifier&gt;u&lt;/Identifier&gt;
            &lt;Definition&gt;
                &lt;ows:AnyValue/&gt;
            &lt;/Definition&gt;
            &lt;NullValue&gt;-32768&lt;/NullValue&gt;
            &lt;owcs:InterpolationMethods&gt;
                &lt;owcs:DefaultMethod&gt;nearest&lt;/owcs:DefaultMethod&gt;
            &lt;/owcs:InterpolationMethods&gt;
        &lt;/Field&gt;
      &lt;/Attribute&gt;
        &lt;Attribute name="standard_name" type="String"&gt;
            &lt;value&gt;surface_eastward_sea_water_velocity&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="units" type="String"&gt;
            &lt;value&gt;m s-1&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="_FillValue" type="Int16"&gt;
            &lt;value&gt;-32768&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="scale_factor" type="Float32"&gt;
            &lt;value&gt;0.009999999776&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Attribute name="ancillary_variables" type="String"&gt;
            &lt;value&gt;DOPx&lt;/value&gt;
        &lt;/Attribute&gt;
        &lt;Array name="u"&gt;
            &lt;Int16/&gt;
            &lt;dimension name="time" size="1"/&gt;
            &lt;dimension name="lat" size="460"/&gt;
            &lt;dimension name="lon" size="701"/&gt;
        &lt;/Array&gt;
        &lt;Map name="time"&gt;
            &lt;Int32/&gt;
            &lt;dimension name="time" size="1"/&gt;
        &lt;/Map&gt;
        &lt;Map name="lat"&gt;
            &lt;Float32/&gt;
            &lt;dimension name="lat" size="460"/&gt;
        &lt;/Map&gt;
        &lt;Map name="lon"&gt;
            &lt;Float32/&gt;
            &lt;dimension name="lon" size="701"/&gt;
        &lt;/Map&gt;
    &lt;/Grid&gt;

    &lt;dataBLOB href=""/&gt;
&lt;/Dataset&gt;
&lt;/pre&gt;

==== Namespace Blocking Transform ====

Returns all elements NOT in the DAP2 namespace. Or in other words, discard elements in the DAP2 namespace:

 &lt;xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dap="http://xml.opendap.org/ns/DAP2" &gt;
    &lt;xsl:output method='xml' version='1.0' encoding='UTF-8' indent='yes'/&gt;
 
    &lt;xsl:strip-space elements="*" /&gt;
 
    &lt;xsl:template match="*"&gt;
        &lt;xsl:choose&gt;
            '''&lt;xsl:when test="namespace-uri()!='http://xml.opendap.org/ns/DAP2'"&gt;'''
                &lt;xsl:copy &gt;
                    &lt;xsl:call-template name="textAndattributes" /&gt;
                    &lt;xsl:apply-templates /&gt;
                &lt;/xsl:copy&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
                &lt;xsl:apply-templates /&gt;
            &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
    &lt;/xsl:template&gt;
 
    &lt;xsl:template  match="@*|text()" /&gt;
 
    &lt;xsl:template name="textAndattributes" &gt;&lt;xsl:copy-of select="text()|@*" /&gt;&lt;/xsl:template&gt;
 
 &lt;/xsl:stylesheet&gt;

==== Result ====

And we get back just the CoverageDescription and the CoverageSummary:

&lt;pre&gt;
&lt;/pre&gt;

==== Namespace Passing Transform ====

Returns all elements IN the DAP2 namespace:

 &lt;xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dap="http://xml.opendap.org/ns/DAP2" &gt;
    &lt;xsl:output method='xml' version='1.0' encoding='UTF-8' indent='yes'/&gt;
 
    &lt;xsl:strip-space elements="*" /&gt;
    
    &lt;xsl:template match="*"&gt;
        &lt;xsl:choose&gt;
            '''&lt;xsl:when test="namespace-uri()='http://xml.opendap.org/ns/DAP2'"&gt;'''
                &lt;xsl:copy &gt;
                    &lt;xsl:call-template name="textAndattributes" /&gt;
                    &lt;xsl:apply-templates /&gt;
                &lt;/xsl:copy&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
                &lt;xsl:apply-templates /&gt;
            &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
    &lt;/xsl:template&gt;
 
    &lt;xsl:template  match="@*|text()" /&gt;
 
    &lt;xsl:template name="textAndattributes" &gt;&lt;xsl:copy-of select="text()|@*" /&gt;&lt;/xsl:template&gt;
  
 &lt;/xsl:stylesheet&gt;

==== Result ====

The DAP DDX document minus the foreign namespace XML.


&lt;pre&gt;
&lt;/pre&gt;


[[Category:Development|DAP3/4]] [[Category:DAP4|DAP3/4]]</text>
      <sha1>jrfbl66n9klcyhyas5uulxsj1aan1g1</sha1>
    </revision>
  </page>
</mediawiki>
