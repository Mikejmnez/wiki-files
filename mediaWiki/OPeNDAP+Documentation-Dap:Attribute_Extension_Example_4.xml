<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.11/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.11/ http://www.mediawiki.org/xml/export-0.11.xsd" version="0.11" xml:lang="en">
  <siteinfo>
    <sitename>OPeNDAP Documentation</sitename>
    <dbname>wikidb</dbname>
    <base>https://docs.opendap.org/index.php/Home</base>
    <generator>MediaWiki 1.38.4</generator>
    <case>first-letter</case>
    <namespaces>
      <namespace key="-2" case="first-letter">Media</namespace>
      <namespace key="-1" case="first-letter">Special</namespace>
      <namespace key="0" case="first-letter" />
      <namespace key="1" case="first-letter">Talk</namespace>
      <namespace key="2" case="first-letter">User</namespace>
      <namespace key="3" case="first-letter">User talk</namespace>
      <namespace key="4" case="first-letter">OPeNDAP Documentation</namespace>
      <namespace key="5" case="first-letter">OPeNDAP Documentation talk</namespace>
      <namespace key="6" case="first-letter">File</namespace>
      <namespace key="7" case="first-letter">File talk</namespace>
      <namespace key="8" case="first-letter">MediaWiki</namespace>
      <namespace key="9" case="first-letter">MediaWiki talk</namespace>
      <namespace key="10" case="first-letter">Template</namespace>
      <namespace key="11" case="first-letter">Template talk</namespace>
      <namespace key="12" case="first-letter">Help</namespace>
      <namespace key="13" case="first-letter">Help talk</namespace>
      <namespace key="14" case="first-letter">Category</namespace>
      <namespace key="15" case="first-letter">Category talk</namespace>
    </namespaces>
  </siteinfo>
  <page>
    <title>Dap:Attribute Extension Example 4</title>
    <ns>0</ns>
    <id>404</id>
    <revision>
      <id>2926</id>
      <parentid>2905</parentid>
      <timestamp>2009-01-17T03:07:14Z</timestamp>
      <contributor>
        <username>Ndp</username>
        <id>2</id>
      </contributor>
      <origin>2926</origin>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text bytes="11121" sha1="15l28dpafn9em3dle70j8wx36kfb9o5" xml:space="preserve">== Example 4 ==

Here we mingle WCS content into the DDX document. In  this example the wcs:CoverageDescription contains/encapsulated the DDX content. In addition, key components of the coverage such as the wcs:Field elements are correctly associated with the DDX elements that they are describing.


==== Source XML ====
 &lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &lt;Dataset name="200803061600_HFRadar_USEGC_6km_rtv_SIO.nc"
         xmlns="http://xml.opendap.org/ns/DAP2"
         xmlns:wcs="http://www.opengis.net/wcs/1.1"
         xmlns:ows="http://www.opengis.net/ows/1.1"
         xmlns:owcs="http://www.opengis.net/wcs/1.1/ows"
         xmlns:gml="http://www.opengis.net/gml/3.2"
         xmlns:xlink="http://www.w3.org/1999/xlink"
        &gt;
 
    &lt;wcs:CoverageDescription&gt;
 
        &lt;ows:Title&gt;Near-Real Time Surface Ocean Velocity&lt;/ows:Title&gt;
        &lt;ows:Abstract&gt;CoverageDescription generated by OPeNDAP WCS UseCase 2.0&lt;/ows:Abstract&gt;
        &lt;wcs:Identifier&gt;coverage/200803061600_HFRadar_USEGC_6km_rtv_SIO.nc&lt;/wcs:Identifier&gt;
        &lt;wcs:Domain&gt;
            &lt;wcs:SpatialDomain&gt;
                &lt;ows:BoundingBox crs="urn:ogc:def:crs:EPSG::4326"&gt;
                    &lt;ows:LowerCorner&gt;-97.8839 21.736&lt;/ows:LowerCorner&gt;
                    &lt;ows:UpperCorner&gt;-57.2312 46.4944&lt;/ows:UpperCorner&gt;
                &lt;/ows:BoundingBox&gt;
            &lt;/wcs:SpatialDomain&gt;
            &lt;wcs:TemporalDomain&gt;
                &lt;gml:timePosition&gt;2008-03-27T16:00:00.000Z&lt;/gml:timePosition&gt;
            &lt;/wcs:TemporalDomain&gt;
        &lt;/wcs:Domain&gt;
        &lt;wcs:Range&gt;
 
            &lt;Attribute name="NC_GLOBAL" type="Container"&gt;
                &lt;Attribute name="Conventions" type="String"&gt;
                    &lt;value&gt;CF-1.1&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="title" type="String"&gt;
                    &lt;value&gt;Near-Real Time Surface Ocean Velocity&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="institution" type="String"&gt;
                    &lt;value&gt;Scripps Institution of Oceanography&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="source" type="String"&gt;
                    &lt;value&gt;Surface Ocean HF-Radar&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="history" type="String"&gt;
                    &lt;value&gt;12-Mar-2008 22:26:19: NetCDF file created&lt;/value&gt;
                &lt;/Attribute&gt;
            &lt;/Attribute&gt;
 
            &lt;Grid name="u"&gt;
                  '''&lt;wcs:Field&gt;'''
                     '''&lt;ows:Title&gt;surface_eastward_sea_water_velocity&lt;/ows:Title&gt;'''
                     '''&lt;ows:Abstract&gt;Eastward component of a 2D sea surface velocity vector.&lt;/ows:Abstract&gt;'''
                     '''&lt;wcs:Identifier&gt;u&lt;/wcs:Identifier&gt;'''
                     '''&lt;wcs:Definition&gt;'''
                        '''&lt;ows:AnyValue/&gt;'''
                     '''&lt;/wcs:Definition&gt;'''
                     '''&lt;wcs:NullValue&gt;-32768&lt;/wcs:NullValue&gt;'''
                     '''&lt;owcs:InterpolationMethods&gt;'''
                        '''&lt;owcs:DefaultMethod&gt;nearest&lt;/owcs:DefaultMethod&gt;'''
                     '''&lt;/owcs:InterpolationMethods&gt;'''
                  '''&lt;/wcs:Field&gt;'''
                &lt;Attribute name="standard_name" type="String"&gt;
                    &lt;value&gt;surface_eastward_sea_water_velocity&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="units" type="String"&gt;
                    &lt;value&gt;m s-1&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="_FillValue" type="Int16"&gt;
                    &lt;value&gt;-32768&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="scale_factor" type="Float32"&gt;
                    &lt;value&gt;0.009999999776&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Attribute name="ancillary_variables" type="String"&gt;
                    &lt;value&gt;DOPx&lt;/value&gt;
                &lt;/Attribute&gt;
                &lt;Array name="u"&gt;
                    &lt;Int16/&gt;
                    &lt;dimension name="time" size="1"/&gt;
                    &lt;dimension name="lat" size="460"/&gt;
                    &lt;dimension name="lon" size="701"/&gt;
                &lt;/Array&gt;
                &lt;Map name="time"&gt;
                    &lt;Int32/&gt;
                    &lt;dimension name="time" size="1"/&gt;
                &lt;/Map&gt;
                &lt;Map name="lat"&gt;
                    &lt;Float32/&gt;
                    &lt;dimension name="lat" size="460"/&gt;
                &lt;/Map&gt;
                &lt;Map name="lon"&gt;
                    &lt;Float32/&gt;
                    &lt;dimension name="lon" size="701"/&gt;
                &lt;/Map&gt;
            &lt;/Grid&gt;
 
        &lt;/wcs:Range&gt;
 
        &lt;wcs:SupportedCRS&gt;urn:ogc:def:crs:EPSG::4326&lt;/wcs:SupportedCRS&gt;
        &lt;wcs:SupportedFormat&gt;netcdf-cf1.0&lt;/wcs:SupportedFormat&gt;
        &lt;wcs:SupportedFormat&gt;dap2.0&lt;/wcs:SupportedFormat&gt;
    &lt;/wcs:CoverageDescription&gt;
    &lt;dataBLOB href=""/&gt;
 
 &lt;/Dataset&gt;

==== Namespace Blocking Transform ====

Returns all elements NOT in the DAP2 namespace. Or in other words, discard elements in the DAP2 namespace:

 &lt;xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dap="http://xml.opendap.org/ns/DAP2" &gt;
    &lt;xsl:output method='xml' version='1.0' encoding='UTF-8' indent='yes'/&gt;
 
    &lt;xsl:strip-space elements="*" /&gt;
 
    &lt;xsl:template match="*"&gt;
        &lt;xsl:choose&gt;
            '''&lt;xsl:when test="namespace-uri()!='http://xml.opendap.org/ns/DAP2'"&gt;'''
                &lt;xsl:copy &gt;
                    &lt;xsl:call-template name="textAndattributes" /&gt;
                    &lt;xsl:apply-templates /&gt;
                &lt;/xsl:copy&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
                &lt;xsl:apply-templates /&gt;
            &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
    &lt;/xsl:template&gt;
 
    &lt;xsl:template  match="@*|text()" /&gt;
 
    &lt;xsl:template name="textAndattributes" &gt;&lt;xsl:copy-of select="text()|@*" /&gt;&lt;/xsl:template&gt;
 
 &lt;/xsl:stylesheet&gt;

==== Result ====

The extracted wcs:CoverageDescription element:

 &lt;wcs:CoverageDescription xmlns="http://xml.opendap.org/ns/DAP2" xmlns:wcs="http://www.opengis.net/wcs/1.1"
                         xmlns:ows="http://www.opengis.net/ows/1.1"
                         xmlns:owcs="http://www.opengis.net/wcs/1.1/ows"
                         xmlns:gml="http://www.opengis.net/gml/3.2"
                         xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
   &lt;ows:Title&gt;Near-Real Time Surface Ocean Velocity&lt;/ows:Title&gt;
   &lt;ows:Abstract&gt;CoverageDescription generated by OPeNDAP WCS UseCase 2.0&lt;/ows:Abstract&gt;
   &lt;wcs:Identifier&gt;coverage/200803061600_HFRadar_USEGC_6km_rtv_SIO.nc&lt;/wcs:Identifier&gt;
   &lt;wcs:Domain&gt;
      &lt;wcs:SpatialDomain&gt;
         &lt;ows:BoundingBox crs="urn:ogc:def:crs:EPSG::4326"&gt;
            &lt;ows:LowerCorner&gt;-97.8839 21.736&lt;/ows:LowerCorner&gt;
            &lt;ows:UpperCorner&gt;-57.2312 46.4944&lt;/ows:UpperCorner&gt;
         &lt;/ows:BoundingBox&gt;
      &lt;/wcs:SpatialDomain&gt;
      &lt;wcs:TemporalDomain&gt;
         &lt;gml:timePosition&gt;2008-03-27T16:00:00.000Z&lt;/gml:timePosition&gt;
      &lt;/wcs:TemporalDomain&gt;
   &lt;/wcs:Domain&gt;
   &lt;wcs:Range&gt;
      '''&lt;wcs:Field&gt;'''
         '''&lt;ows:Title&gt;surface_eastward_sea_water_velocity&lt;/ows:Title&gt;'''
         '''&lt;ows:Abstract&gt;Eastward component of a 2D sea surface velocity vector.&lt;/ows:Abstract&gt;'''
         '''&lt;wcs:Identifier&gt;u&lt;/wcs:Identifier&gt;'''
         '''&lt;wcs:Definition&gt;'''
            '''&lt;ows:AnyValue/&gt;'''
         '''&lt;/wcs:Definition&gt;'''
         '''&lt;wcs:NullValue&gt;-32768&lt;/wcs:NullValue&gt;'''
         '''&lt;owcs:InterpolationMethods&gt;'''
            '''&lt;owcs:DefaultMethod&gt;nearest&lt;/owcs:DefaultMethod&gt;'''
         '''&lt;/owcs:InterpolationMethods&gt;'''
      '''&lt;/wcs:Field&gt;'''
   &lt;/wcs:Range&gt;
   &lt;wcs:SupportedCRS&gt;urn:ogc:def:crs:EPSG::4326&lt;/wcs:SupportedCRS&gt;
   &lt;wcs:SupportedFormat&gt;netcdf-cf1.0&lt;/wcs:SupportedFormat&gt;
   &lt;wcs:SupportedFormat&gt;dap2.0&lt;/wcs:SupportedFormat&gt;
 &lt;/wcs:CoverageDescription&gt;

==== Namespace Passing Transform ====

Returns all elements NOT in the DAP2 namespace. Or in other words, discard elements in the DAP2 namespace:

 &lt;xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dap="http://xml.opendap.org/ns/DAP2" &gt;
    &lt;xsl:output method='xml' version='1.0' encoding='UTF-8' indent='yes'/&gt;
 
    &lt;xsl:strip-space elements="*" /&gt;
 
    &lt;xsl:template match="*"&gt;
        &lt;xsl:choose&gt;
            '''&lt;xsl:when test="namespace-uri()='http://xml.opendap.org/ns/DAP2'"&gt;'''
                &lt;xsl:copy &gt;
                    &lt;xsl:call-template name="textAndattributes" /&gt;
                    &lt;xsl:apply-templates /&gt;
                &lt;/xsl:copy&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
                &lt;xsl:apply-templates /&gt;
            &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
    &lt;/xsl:template&gt;
 
    &lt;xsl:template  match="@*|text()" /&gt;
 
    &lt;xsl:template name="textAndattributes" &gt;&lt;xsl:copy-of select="text()|@*" /&gt;&lt;/xsl:template&gt;
 
 &lt;/xsl:stylesheet&gt;

==== Result ====
 The DAP2 DDX document minus the foreign namespace XML:

&lt;pre&gt;
&lt;Dataset xmlns="http://xml.opendap.org/ns/DAP2" xmlns:wcs="http://www.opengis.net/wcs/1.1"
         xmlns:ows="http://www.opengis.net/ows/1.1"
         xmlns:owcs="http://www.opengis.net/wcs/1.1/ows"
         xmlns:gml="http://www.opengis.net/gml/3.2"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         name="200803061600_HFRadar_USEGC_6km_rtv_SIO.nc"&gt;
   &lt;Attribute name="NC_GLOBAL" type="Container"&gt;
      &lt;Attribute name="Conventions" type="String"&gt;
         &lt;value&gt;CF-1.1&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="title" type="String"&gt;
         &lt;value&gt;Near-Real Time Surface Ocean Velocity&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="institution" type="String"&gt;
         &lt;value&gt;Scripps Institution of Oceanography&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="source" type="String"&gt;
         &lt;value&gt;Surface Ocean HF-Radar&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="history" type="String"&gt;
         &lt;value&gt;12-Mar-2008 22:26:19: NetCDF file created&lt;/value&gt;
      &lt;/Attribute&gt;
   &lt;/Attribute&gt;
   &lt;Grid name="u"&gt;
      &lt;Attribute name="standard_name" type="String"&gt;
         &lt;value&gt;surface_eastward_sea_water_velocity&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="units" type="String"&gt;
         &lt;value&gt;m s-1&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="_FillValue" type="Int16"&gt;
         &lt;value&gt;-32768&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="scale_factor" type="Float32"&gt;
         &lt;value&gt;0.009999999776&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Attribute name="ancillary_variables" type="String"&gt;
         &lt;value&gt;DOPx&lt;/value&gt;
      &lt;/Attribute&gt;
      &lt;Array name="u"&gt;
         &lt;Int16/&gt;
         &lt;dimension name="time" size="1"/&gt;
         &lt;dimension name="lat" size="460"/&gt;
         &lt;dimension name="lon" size="701"/&gt;
      &lt;/Array&gt;
      &lt;Map name="time"&gt;
         &lt;Int32/&gt;
         &lt;dimension name="time" size="1"/&gt;
      &lt;/Map&gt;
      &lt;Map name="lat"&gt;
         &lt;Float32/&gt;
         &lt;dimension name="lat" size="460"/&gt;
      &lt;/Map&gt;
      &lt;Map name="lon"&gt;
         &lt;Float32/&gt;
         &lt;dimension name="lon" size="701"/&gt;
      &lt;/Map&gt;
   &lt;/Grid&gt;
   &lt;dataBLOB href=""/&gt;
&lt;/Dataset&gt;
&lt;/pre&gt;

[[Category:Development|DAP3/4]] [[Category:DAP4|DAP3/4]]</text>
      <sha1>15l28dpafn9em3dle70j8wx36kfb9o5</sha1>
    </revision>
  </page>
</mediawiki>
